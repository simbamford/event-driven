<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>event-driven: How to configure and run `zynqGrabber`</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">event-driven
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to configure and run `zynqGrabber` </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code>zynqGrabber</code> is an application that runs on the ZCB or z-turn which forms a bridge between the FPGA (reading events from the sensors), and the <code>YARP</code> network, such that the events can be processed on one or more CPUs or neuromorphic hardware. To run the <code>zynqGrabber</code>:</p><ul>
<li>the ZCB needs to be running, or connected to, a `yarpserver`,</li>
<li><code>event-driven</code> needs to be installed correctly with `zynqGrabber ENABLED`, and</li>
<li>the configuration file needs to be configured for the sensors connected to the hardware.</li>
</ul>
<h2><code>zynqGrabber</code> configuration file</h2>
<p>When <code>event-driven</code> is installed (<code>make install</code>), it installs also the configuration files for the <code>zynqGrabber</code>. However the default values in the file need to be modified depending on the hardware that you want to use.</p>
<p>:warning: We need to make a local copy of the file such that re-installing <code>event-driven</code> won't overwrite your local changes with the default ones!</p>
<p>First of all make an SSH connection to the ZCB. You can modify the local configuration file using: </p><div class="fragment"><div class="line">nano ~/.local/share/yarp/contexts/event-driven/zynqGrabber.ini</div></div><!-- fragment --><p> If the file/folder do not exist you must first import the local copy from the installed copy. Run the following command to automatically import a local copy of the configurations file and re-try modifying the file: </p><div class="fragment"><div class="line">yarp-config context --import event-driven zynqGrabber.ini</div></div><!-- fragment --><p> The <code>zynqGrabber</code> has the following options:</p><ul>
<li><em>name</em> : renames the ports opened, needed if more than one zynqGrabber is running on the same network</li>
<li><em>verbose</em> : print out a little more information on start-up</li>
<li><em>aps</em> : turn on the ATIS aps events</li>
<li><em>dataDevice</em> : the full path to the device that will be opened to read events</li>
<li><em>hpu_read</em> : open a thread to read data from the HPU and publish it to <code>YARP</code></li>
<li><em>hpu_write</em> : open a thread to write data to the HPU device</li>
<li><em>packet_size</em> : the maximum number of events to send in a single packet (too small can lead to latency, too large can lead to packet-loss in UDP connections)</li>
<li><em>visCtrlLeft</em> : connect to a device to configure the left camera</li>
<li><em>visCtrlRight</em> : connect to a device to configure the right camera</li>
<li><em>skinCtrl</em> : connect to a device to configure the skin</li>
<li><em>use_spinnaker</em> : configure HPU to write to a SpiNNaker device</li>
<li><em>[ATIS_BIAS_LEFT]</em> : bias values for the left camera</li>
<li><em>[ATIS_BIAS_RIGHT]</em> : bias values for the right camera</li>
<li><em>[SKIN_CNFG]</em> : configuration parameters for the skin</li>
</ul>
<p>Most default values are fine for use of <code>event-driven</code> sensors. However, the hardware you have means that the file will need to be configured.</p>
<ul>
<li>Comment out any devices you don't have connected.</li>
<li>Set <em>use_spinnaker</em> and the HPU device to <em>hpu_read</em> and <em>hpu_write</em> if connected to the SpiNNaker.</li>
<li>Change the name if this is not the only <code>zynqGrabber</code> on the network</li>
</ul>
<h2>Run the <code>zynqGrabber</code></h2>
<p>Once the configuration has been correctly performed, you can run the <code>zynqGrabber</code> from the terminal: </p><div class="fragment"><div class="line">zynqGrabber</div></div><!-- fragment --><p> If <code>zynqGrabber</code> doesn't open it should give a warning message stating the problem, typically <code>yarpserver</code> is not running/connected or it is trying to open a device that is not physically connected.</p>
<h2>Check the zynqGrabber is streaming data</h2>
<p>On your own laptop that has a connection to the ZCB `yarpserver` you can run: </p><div class="fragment"><div class="line">yarp read ... /zynqGrabber/AE:o</div></div><!-- fragment --><p> to verify that the data is streaming. The data is not in a human-readable format but it's presence indicates that the <code>zynqGrabber</code> is working. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 18 2019 10:07:20 for event-driven by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
